<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Happy Diwali 🪔</title>
<style>
  body {
    margin: 0; padding: 0;
    background: radial-gradient(circle at top left, #fceabb, #f8b500, #f76b1c, #c13515);
    height: 100vh; display: flex; justify-content: center; align-items: center;
    color: #fff; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    overflow: hidden; text-align: center; position: relative;
    animation: fadeBg 10s infinite alternate, pageFade 2s ease-in;
    cursor: pointer; /* indicate user can click anywhere */
  }
  @keyframes fadeBg {
    from { background: radial-gradient(circle at top left, #fceabb, #f8b500, #f76b1c, #c13515); }
    to { background: radial-gradient(circle at bottom right, #ffd56b, #ff9a00, #ff5e00, #7a2600); }
  }
  @keyframes pageFade { from { opacity: 0; } to { opacity: 1; } }
  body::before {
    content: "";
    position: fixed; top: 0; left: 0;
    width: 100vw; height: 100vh;
    background: rgba(0, 0, 0, 0.4);
    pointer-events: none; z-index: 0;
  }
  .center-content { max-width: 400px; width: 90%; position: relative; z-index: 1; }
  #title { font-size: 2.5em; margin-bottom: 15px; background: linear-gradient(90deg, #fff5b7, #ffd700, #ffae00, #fff5b7); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-size: 200%; animation: goldshine 3s linear infinite; }
  @keyframes goldshine { 0% { background-position: 0% 50%; } 100% { background-position: 100% 50%; } }
  #greeting, #messageSlider { color: #fffefc; font-weight: 900; text-shadow: 0 0 8px #ffae00, 0 0 20px #ff7800, 0 0 30px #ff4e00; }
  #greeting { font-size: 2.2em; margin: 20px 0; }
  input { padding: 12px; font-size: 1em; border-radius: 25px; border: none; outline: none; width: 100%; max-width: 300px; margin: 15px auto; display: block; box-shadow: 0 0 15px #ffae00aa; transition: box-shadow 0.3s; color: #333; }
  input:focus { box-shadow: 0 0 25px #ff4500aa; }
  button { padding: 12px 25px; border: none; border-radius: 25px; font-size: 1.1em; background: linear-gradient(45deg, #ff4500, #ffae00); color: white; font-weight: bold; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 0 20px #ffa500aa, 0 0 40px #ff4500aa; letter-spacing: 1px; margin-top: 10px; }
  button:hover { background: linear-gradient(45deg, #ffae00, #ff4500); transform: scale(1.1); box-shadow: 0 0 40px #ffae0055, 0 0 80px #ff450055; }
  .diya { display: none; font-size: 4em; text-shadow: 0 0 20px #ffda44, 0 0 40px #ff4500; margin: 25px 0 10px; animation: flicker 1.5s infinite alternate; }
  @keyframes flicker { 0% { text-shadow: 0 0 15px #ffae00, 0 0 30px #ff4500, 0 0 45px #ffae00; } 50% { text-shadow: 0 0 25px #ff4500, 0 0 50px #ffae00, 0 0 80px #ff4500; } 100% { text-shadow: 0 0 15px #ffae00, 0 0 30px #ff4500, 0 0 45px #ffae00; } }
  #messageSlider { font-size: 1.4em; min-height: 60px; margin: 10px 0; animation: fadeIn 1.5s ease; }
  @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
  .fact-box { display: none; background: rgba(255, 255, 255, 0.15); color: #111; padding: 15px; margin: 20px auto; border-radius: 15px; max-width: 350px; font-weight: 700; box-shadow: 0 0 25px #ffbb33aa; }
  #showFactBtn { background: linear-gradient(45deg, #ffae00, #ff4500); color: white; font-size: 1em; border: none; border-radius: 20px; padding: 12px 25px; cursor: pointer; font-weight: 700; transition: all 0.3s; }
  #showFactBtn:hover { background: linear-gradient(45deg, #ff4500, #ffae00); transform: scale(1.1); }
  #fireworks { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; pointer-events: none; z-index: 0; overflow: visible; }
  .particle { position: absolute; border-radius: 50%; filter: drop-shadow(0 0 4px #ffae00); box-shadow: 0 0 10px #fff7ae, 0 0 20px #ffae0022; opacity: 0.8; animation: sparkle 3s linear infinite; }
  @keyframes sparkle { 0% { transform: translate(0,0) scale(0.5); opacity: 1; } 100% { transform: translate(calc(100vw - 50%), -100vh) scale(1.5); opacity: 0; } }
  .confetti { position: fixed; width: 10px; height: 14px; background-color: #ffae00; opacity: 0.9; border-radius: 3px; pointer-events: none; animation: confetti-fall 4s ease-out forwards; }
  @keyframes confetti-fall { 0% { transform: translateY(-10vh) rotate(0deg); opacity: 1; } 100% { transform: translateY(110vh) rotate(360deg); opacity: 0; } }
  @keyframes floatUp { from { transform: translateY(0); opacity: 1; } to { transform: translateY(-110vh); opacity: 0; } }
  @media (max-width: 450px) { #greeting, #title { font-size: 1.8em; } input, button { font-size: 1em; padding: 10px 15px; } }
</style>
</head>
<body>

<audio id="bgMusic" loop>
  <source src="diwalisong.mp3" type="audio/mpeg" />
</audio>

<div id="fireworks"></div>
<div id="floatingDiyas"></div>

<div class="center-content">
  <h1 id="title">Welcome to Diwali Celebration</h1>
  <input type="text" id="nameInput" placeholder="Enter Your Name" />
  <button id="celebrateBtn">Let's Celebrate Together 🎉</button>
  <h1 id="greeting" style="display:none;"></h1>
  <div class="diya" id="diya">🪔</div>
  <div id="messageSlider"></div>
  <button id="showFactBtn" style="display:none;">Show a Diwali Fact</button>
  <div class="fact-box" id="factBox"></div>
</div>

<script>
const messages = [
  "✨ Light a lamp of love this Diwali, {name}!",
  "🎆 May the festival of lights brighten your life, {name}.",
  "🪔 Wishing you prosperity and happiness, {name}!",
  "🌟 Let's spread light and positivity together, {name}!"
];

const facts = [
  "Diwali marks Lord Rama’s return to Ayodhya after 14 years.",
  "Lighting diyas symbolizes victory of light over darkness.",
  "Fireworks drive away evil spirits during Diwali nights.",
  "Celebrated by millions worldwide in over 20 countries."
];

const bgMusic = document.getElementById("bgMusic");
const fireworksContainer = document.getElementById("fireworks");
const celebrateBtn = document.getElementById("celebrateBtn");
const nameInput = document.getElementById("nameInput");
const greeting = document.getElementById("greeting");
const diya = document.getElementById("diya");
const messageSlider = document.getElementById("messageSlider");
const showFactBtn = document.getElementById("showFactBtn");
const factBox = document.getElementById("factBox");
const floatingDiyas = document.getElementById("floatingDiyas");

let messageIndex = 0;
let msgInterval;

function createFirework() {
  const fw = document.createElement("div");
  fw.classList.add("particle");
  const size = Math.random() * 6 + 4;
  fw.style.width = fw.style.height = size + "px";
  fw.style.left = Math.random() * window.innerWidth + "px";
  fw.style.top = Math.random() * window.innerHeight + "px";
  fw.style.background = `hsl(${Math.random() * 360}, 80%, 60%)`;
  fw.style.animationDuration = (1 + Math.random() * 1.5) + "s";
  fireworksContainer.appendChild(fw);
  setTimeout(() => fw.remove(), 3000);
}
setInterval(createFirework, 300);

function createFloatingDiya() {
  const diyaEl = document.createElement("div");
  diyaEl.textContent = "🪔";
  diyaEl.style.position = "fixed";
  diyaEl.style.left = Math.random() * 100 + "vw";
  diyaEl.style.bottom = "-50px";
  diyaEl.style.fontSize = (2 + Math.random() * 2) + "em";
  diyaEl.style.opacity = 0.8;
  diyaEl.style.animation = `floatUp ${5 + Math.random() * 5}s linear`;
  floatingDiyas.appendChild(diyaEl);
  setTimeout(() => diyaEl.remove(), 10000);
}
setInterval(createFloatingDiya, 2000);

function launchConfetti() {
  for (let i = 0; i < 30; i++) {
    const confetti = document.createElement("div");
    confetti.classList.add("confetti");
    confetti.style.backgroundColor = `hsl(${Math.random() * 360},80%,60%)`;
    confetti.style.left = Math.random() * 100 + "vw";
    confetti.style.animationDelay = i * 0.1 + "s";
    confetti.style.width = 5 + Math.random() * 7 + "px";
    confetti.style.height = 5 + Math.random() * 10 + "px";
    document.body.appendChild(confetti);
    setTimeout(() => confetti.remove(), 4000);
  }
}

function showMessages(name) {
  if (msgInterval) clearInterval(msgInterval);
  function nextMessage() {
    const msg = messages[messageIndex].replace("{name}", name);
    messageSlider.textContent = msg;
    messageIndex = (messageIndex + 1) % messages.length;
  }
  nextMessage();
  msgInterval = setInterval(nextMessage, 4000);
}

celebrateBtn.onclick = () => {
  const name = nameInput.value.trim();
  if (!name) {
    alert("Please enter your name to celebrate!");
    return;
  }

  // Play music after button click to comply with autoplay policy
  bgMusic.play().catch(() => {
    alert("Music play failed! Please click the button again.");
  });

  greeting.textContent = `Happy Diwali, ${name}!`;
  greeting.style.display = "block";
  diya.style.display = "block";
  messageSlider.style.display = "block";
  showFactBtn.style.display = "inline-block";
  nameInput.style.display = "none";
  celebrateBtn.style.display = "none";
  document.getElementById("title").textContent = "";
  showMessages(name);
  launchConfetti();

  setTimeout(() => {
    const bless = document.createElement("div");
    bless.textContent = "🕉️ May the light of Diwali guide you always 🕉️";
    bless.style.position = "fixed";
    bless.style.bottom = "20px";
    bless.style.width = "100%";
    bless.style.textAlign = "center";
    bless.style.fontSize = "1.3em";
    bless.style.color = "#fff";
    bless.style.textShadow = "0 0 15px #ffae00,0 0 25px #ff4500";
    bless.style.animation = "fadeIn 2s ease";
    document.body.appendChild(bless);
  }, 8000);
};

showFactBtn.onclick = () => {
  const fact = facts[Math.floor(Math.random() * facts.length)];
  factBox.textContent = fact;
  factBox.style.display = "block";
};
</script>

</body>
</html>